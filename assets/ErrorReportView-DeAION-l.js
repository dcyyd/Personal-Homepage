import{r as e,c as s,b as t,i as a,w as l,k as o,y as r,e as i,v as n,d as u,h as c,t as d,o as p}from"./index-DNWVoqyr.js";import{e as m,a as g}from"./emailConfig-B8-2I1F9.js";const b={class:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 pt-20"},v={class:"container mx-auto px-4 py-16"},x={class:"max-w-2xl mx-auto bg-slate-800/80 rounded-xl p-6 sm:p-8 shadow-lg border border-slate-700/30 transition-all duration-300 hover:border-indigo-500/50 hover:shadow-xl transform hover:-translate-y-1 animate-slide-up"},y=["disabled"],f={key:0},h={key:1,class:"inline-flex items-center"},w={__name:"ErrorReportView",setup(w){const{form:k,isSubmitting:S,message:V,isSuccess:_,submitReport:C}=(()=>{const s=e({type:"ui",description:"",steps:""}),t=e(!1),a=e(""),l=e(!1),o=()=>!(!s.value.description||!s.value.steps)||(r("请填写错误描述和重现步骤",!1),!1),r=(e,s)=>{a.value=e,l.value=s,setTimeout((()=>{a.value=""}),3e3)},i=()=>{s.value.type="ui",s.value.description="",s.value.steps=""};return{form:s,isSubmitting:t,message:a,isSuccess:l,submitReport:async()=>{if(!o())return!1;t.value=!0;try{const e={from_name:"Error Reporter",to_name:"dcyyd_kcug@yeah.net",subject:`【错误报告】${s.value.type}`,message:`• 错误类型：${s.value.type}\n• 错误描述：${s.value.description}\n• 重现步骤：${s.value.steps}`};return await m.send(g.serviceId,g.templateId,e,g.publicKey),r("报告已提交，我们将尽快处理！",!0),i(),!0}catch(e){return r("提交失败，请稍后重试！",!1),!1}finally{t.value=!1}},validateForm:o,showMessage:r,resetForm:i}})();return(e,m)=>(p(),s("div",b,[t("main",v,[t("section",x,[m[9]||(m[9]=t("h1",{class:"text-3xl sm:text-4xl font-bold text-indigo-400 mb-6"},"错误报告",-1)),t("form",{onSubmit:m[3]||(m[3]=l(((...e)=>i(C)&&i(C)(...e)),["prevent"])),class:"space-y-6"},[t("div",null,[m[5]||(m[5]=t("label",{class:"block text-gray-400 mb-2"},"错误类型",-1)),o(t("select",{"onUpdate:modelValue":m[0]||(m[0]=e=>i(k).type=e),class:"w-full bg-slate-700 rounded-lg px-4 py-2 text-gray-200 focus:ring-2 focus:ring-indigo-500"},m[4]||(m[4]=[t("option",{value:"ui"},"界面问题",-1),t("option",{value:"function"},"功能错误",-1),t("option",{value:"performance"},"性能问题",-1),t("option",{value:"other"},"其他",-1)]),512),[[r,i(k).type]])]),t("div",null,[m[6]||(m[6]=t("label",{class:"block text-gray-400 mb-2"},"错误描述",-1)),o(t("textarea",{"onUpdate:modelValue":m[1]||(m[1]=e=>i(k).description=e),rows:"5",class:"w-full bg-slate-700 rounded-lg px-4 py-2 text-gray-200 focus:ring-2 focus:ring-indigo-500",placeholder:"请详细描述您遇到的问题..."},null,512),[[n,i(k).description]])]),t("div",null,[m[7]||(m[7]=t("label",{class:"block text-gray-400 mb-2"},"重现步骤",-1)),o(t("textarea",{"onUpdate:modelValue":m[2]||(m[2]=e=>i(k).steps=e),rows:"3",class:"w-full bg-slate-700 rounded-lg px-4 py-2 text-gray-200 focus:ring-2 focus:ring-indigo-500",placeholder:"请描述如何重现这个错误..."},null,512),[[n,i(k).steps]])]),t("button",{type:"submit",class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-lg transition-colors",disabled:i(S)},[i(S)?(p(),s("span",h,m[8]||(m[8]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" 正在提交... ")]))):(p(),s("span",f,"提交报告"))],8,y)],32),i(V)?(p(),s("div",{key:0,class:c({"text-green-500":i(_),"text-red-500":!i(_)})},d(i(V)),3)):a("",!0)])])]))}};export{w as default};
